// unveil2.js - 2.0.0-alpha.3 - https://github.com/nabble/unveil2
!function(a){"use strict";var b="unveil",c=a(),d=!1;a.fn.unveil=function(e){function f(a){return!(!a.width()&&!a.height())&&"none"!==a.css("display")}function g(a){a.addClass(b+"-loading")}function h(a){a.removeClass(b+"-placeholder "+b+"-loading"),a.addClass(b+"-loaded")}function i(){var b=a(this);if(f(b)){var c=m.scrollTop(),d=c+q,e=n!==m?c-n.offset().top:0,g=b.offset().top+e,h=g+b.height();return h>=c-p&&d+p>=g}}function j(){var a=c.filter(i);a.trigger(b),c=c.not(a),a.length}function k(){q=m.height(),j()}function l(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){a(),b=!1},t))}}e=e||{};var m=a(window),n=e.container||m,o=e.placeholder||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",p=e.offset||0,q=m.height(),r=e.breakpoints||[],s=window.devicePixelRatio>1,t=(e.debug||!1,e.throttle||250);return r.sort(function(a,b){return b.minWidth-a.minWidth}),this.one(b,function(){var b,c,d,f,i=a(this),k=m.width(),l="src";for(b=0;b<r.length;b++){var n=r[b].attribute.replace(/^data-/,"");if(k>=r[b].minWidth&&i.data(n)){l=n;break}}d=f=i.data(l),d&&-1!==d.indexOf("|")&&(f=d.split("|")[1],d=d.split("|")[0]),d&&(c=s&&f?f:d,g(i),i.prop("src",c),i.one("load",function(){h(i),"function"==typeof e.loaded&&e.loaded.call(this),j()}),this.complete&&h(i))}),this.each(function(){var d=a(this),e=d.data("src-placeholder")||o;c=a(c).add(this),d.data(b)||(d.data(b,!0),d.data("src")||d.data("src",d.prop("src")),d.one("load",function(){a(this).addClass(b+"-placeholder"),j()}).prop("src","").prop("src",e))}),d||n.on({"resize.unveil":l(k),"scroll.unveil":l(j),"lookup.unveil":j}),setTimeout(j,0),d=!0,this}}(window.jQuery||window.Zepto);